# 代码注释真的重要吗？

很多初学者都认为代码注释非常重要，他们的代码中往往存在着许多注释。

不过可能大多数是对所使用语法的解释，或者是对业务逻辑的逐行说明。

但是随着学习的深入，又会有人告诉你：**代码注释不是越多越好**，甚至**很多注释是多余的**。
因为**清晰的代码本身就是最好的注释**，而冗余的注释反而会降低代码可读性，尤其是当注释和代码实际行为不一致时，还可能造成误导。

那到底该不该写注释？答案是肯定的。但**关键不是“写多少”，而是“写什么”**。

很多人为自己的代码写了一大堆的注释，却只是在描述： **做了什么（what）**，甚至是 **怎么做的（how）**，
却忽略了最有价值的部分：**为什么这么做（why）**。

然而，这是最重要的内容，一般我们需要单独的文档进行记录。

## 文档注释

文档注释非常常见，有许多的风格，遵守规范可以利用 `Doxygen` 工具快速生成 API 文档。

这些注释通常只是专注于功能描述，我们通常会隐藏实现细节，避免抽象泄露。

例如这样的注释：

```cpp
/**
* @brief 默认构造函数
* 
* 初始化 sql::Driver* driver 数据库对象
*/
DatabaseManager();

/**
* @brief 构造一个新的 DatabaseManager 对象
* 
* 用于初始化数据库连接参数，并自动建立连接
* 
* @param hostName 数据库连接 URL: "tcp://127.0.0.1:3306"
* @param userName 登录数据库所用的用户名
* @param password 对应用户名的密码
* @param schema   要使用的数据库名称（模式）
* 
* @note 使用该构造函数后，无需再调用 connect() 方法建立连接。
*/
DatabaseManager(std::string hostName, std::string userName, std::string password, std::string schema);

/**
* @brief 销毁 DatabaseManager 对象并释放数据库资源。
* 
* 该析构函数会清理与数据库相关的资源，包括释放连接（conn）、查询结果集（res）
* 
* @warning 不应在对象销毁后访问其资源成员。
*/
~DatabaseManager();
```

没什么问题，这很简单直观，简单的描述了代码的功能以及使用的注意事项。

这种数据库类如果没有特殊设计，也通常不需要描述 `Why`，因为它的功能就是独立的。

**然而实际开发中，往往代码是和业务需求紧密相关的，这种独立的工具类的编写以及注释是很简单，但是真正涉及业务逻辑时，就不再是如此简单描述功能即可。**

## 文档记录

就如同开会有会议纪要一样，代码的设计和实现也需要有文档记录。

不管是设计文档、需求文档，都应该编写好，实现应当完全遵守文档的要求。

不管是对于别的同事理解，还是自己阅读代码维护，都有非常大的帮助。
